import{r as u,l as E,j as t,i as j,a as V,u as H,aj as U,c as M,m as z}from"./app-1d620b42.js";import{c as L,g as F}from"./products-thunk-dfe080ff.js";import{B as x}from"./Button-58af0c52.js";import{D as G}from"./Drawer-9a34b44a.js";import{B as Y}from"./Box-6051c690.js";import{c as T}from"./createSvgIcon-662d7fe8.js";import{C as A}from"./Close-5745ef5b.js";import{T as c,F as $,I as B,S}from"./TextField-fbd152d1.js";import{c as k}from"./clsx-0839fdbe.js";import{g as W,a as K,s as Q,r as J,m as X,c as Z}from"./memoTheme-60b6209b.js";import{b as D}from"./Popover-68cac8c8.js";import{B as ee}from"./ButtonBase-a773d931.js";import{u as te,a as ae}from"./TransitionGroupContext-c2f548e5.js";import{d as q,l as O,c as R}from"./listItemTextClasses-41b55fba.js";import"./products-service-96e8b073.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./useTheme-57893007.js";import"./Modal-dd3b294b.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-069a1ae0.js";import"./utils-5b5b90fb.js";import"./Paper-69c2a92e.js";import"./Slide-77659ff3.js";import"./debounce-517eeb3c.js";import"./InputBase-fce34ac9.js";import"./isHostComponent-73d6e646.js";import"./useId-576efa18.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-019c100c.js";import"./useControlled-108a587d.js";import"./Grow-029b5aeb.js";import"./isFocusVisible-e8076040.js";function se(e){return W("MuiMenuItem",e)}const oe=K("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),b=oe,re=(e,r)=>{const{ownerState:d}=e;return[r.root,d.dense&&r.dense,d.divider&&r.divider,!d.disableGutters&&r.gutters]},ie=e=>{const{disabled:r,dense:d,divider:n,disableGutters:m,selected:v,classes:l}=e,i=Z({root:["root",d&&"dense",r&&"disabled",!m&&"gutters",n&&"divider",v&&"selected"]},se,l);return{...l,...i}},le=Q(ee,{shouldForwardProp:e=>J(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:re})(X(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${b.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${b.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${b.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${b.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${q.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${q.inset}`]:{marginLeft:52},[`& .${O.root}`]:{marginTop:0,marginBottom:0},[`& .${O.inset}`]:{paddingLeft:36},[`& .${R.root}`]:{minWidth:36},variants:[{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:r})=>!r.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:r})=>r.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${R.root} svg`]:{fontSize:"1.25rem"}}}]}))),ne=u.forwardRef(function(r,d){const n=E({props:r,name:"MuiMenuItem"}),{autoFocus:m=!1,component:v="li",dense:l=!1,divider:f=!1,disableGutters:i=!1,focusVisibleClassName:y,role:I="menuitem",tabIndex:h,className:C,...a}=n,s=u.useContext(D),o=u.useMemo(()=>({dense:l||s.dense||!1,disableGutters:i}),[s.dense,l,i]),p=u.useRef(null);te(()=>{m&&p.current&&p.current.focus()},[m]);const g={...n,dense:o.dense,divider:f,disableGutters:i},w=ie(n),_=ae(p,d);let N;return n.disabled||(N=h!==void 0?h:-1),t.jsx(D.Provider,{value:o,children:t.jsx(le,{ref:_,role:I,tabIndex:N,component:v,focusVisibleClassName:k(w.focusVisible,y),className:k(w.root,C),...a,ownerState:g,classes:w})})}),P=ne,ce=T(t.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),de=T(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function Ge(){const[e,r]=u.useState(!1),[d,n]=u.useState(!1),m=V(),{toastStatus:v}=H(a=>a.app),[l,f]=u.useState({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]});u.useEffect(()=>{v.status==="success"&&r(!1)},[v.status]);const i=(a,s,o)=>{f(p=>{const g=[...p.items];return g[a]={...g[a],[s]:o},{...p,items:g}})},y=()=>{f(a=>({...a,items:[...a.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},I=a=>{f(s=>({...s,items:s.items.filter((o,p)=>p!==a)}))},h=async a=>{if(a.preventDefault(),window.confirm("You want to continue.")){n(!0);try{await M.dispatch(L({...l,item_id:z().format("MMDDYYYYHHmmss")})),await M.dispatch(F()),f({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]}),r(!1),n(!1)}catch{n(!1)}}};u.useEffect(()=>{e&&m(U({}))},[e,m]);const C=["Carton","Case","Bag","Tray","Can","Roll","Sheet","Plastic","Bottle","Kilo","Grams","Each","Dozen","Pack"];return t.jsxs("div",{children:[t.jsx(x,{variant:"contained",onClick:()=>r(!0),children:"Create Item"}),t.jsx(G,{anchor:"bottom",open:e,onClose:()=>r(!1),children:t.jsx(Y,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:t.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[t.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[t.jsxs(x,{variant:"contained",onClick:y,children:[t.jsx(ce,{})," Add Item"]}),t.jsxs(x,{onClick:()=>r(!1),variant:"outlined",children:[t.jsx(A,{})," Close"]})]}),t.jsxs("form",{onSubmit:h,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[t.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),t.jsxs("div",{className:"flex gap-4 w-full",children:[t.jsx(c,{className:"w-full",required:!0,value:l.items[0].barcode,onChange:a=>i(0,"barcode",a.target.value),label:"Barcode",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:l.items[0].name,onChange:a=>i(0,"name",a.target.value),label:"Product Name",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:l.items[0].description,onChange:a=>i(0,"description",a.target.value),label:"Description",variant:"outlined"}),t.jsxs($,{required:!0,fullWidth:!0,children:[t.jsx(B,{children:"Unit of Measurement"}),t.jsx(S,{label:"Unit of Measurement",value:l.items[0].uom,onChange:a=>i(0,"uom",a.target.value),children:C.map(a=>t.jsx(P,{value:a,children:a},a))})]}),t.jsx(c,{className:"w-full",required:!0,value:l.items[0].capital,onChange:a=>i(0,"capital",a.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),t.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),l.items.map((a,s)=>t.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[t.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[t.jsxs("div",{children:["Item ",s+1]}),s!=0&&t.jsxs(x,{variant:"outlined",onClick:()=>I(s),children:[t.jsx(de,{})," Remove"]})]}),t.jsxs("div",{className:"flex gap-4 w-full",children:[t.jsx(c,{disabled:s==0,className:"w-full",required:!0,value:a.barcode,onChange:o=>i(s,"barcode",o.target.value),label:"Barcode",variant:"outlined"}),t.jsx(c,{disabled:s==0,className:"w-full",required:!0,value:a.name,onChange:o=>i(s,"name",o.target.value),label:"Product Name",variant:"outlined"}),t.jsx(c,{disabled:s==0,className:"w-full",required:!0,value:a.description,onChange:o=>i(s,"description",o.target.value),label:"Description",variant:"outlined"}),t.jsxs($,{fullWidth:!0,children:[t.jsx(B,{children:"Unit of Measurement"}),t.jsx(S,{disabled:s==0,label:"Unit of Measurement",value:a.uom,onChange:o=>i(s,"uom",o.target.value),children:C.map(o=>t.jsx(P,{value:o,children:o},o))})]}),t.jsx(c,{className:"w-full",required:!0,value:a.quantity,onChange:o=>i(s,"quantity",o.target.value.replace(/[^0-9.]/g,"")),label:"Quantity",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:a.price,onChange:o=>i(s,"price",o.target.value.replace(/[^0-9.]/g,"")),label:"Price",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:a.discount,onChange:o=>i(s,"discount",o.target.value.replace(/[^0-9.]/g,"")),label:"Discount",variant:"outlined"})]})]},s))]}),t.jsx(x,{disabled:d,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"Submit"})]})]})})})]})}export{Ge as default};
