import{j as e,r as u,a as E,u as M,al as _,c as C,h as B,_ as k}from"./app-8857b6cd.js";import{u as P,g as T}from"./products-thunk-bfa789d9.js";import A from"./item-product-delete-section-f0423122.js";import{B as p}from"./Button-ec7daf15.js";import{c as R}from"./createSvgIcon-467da01d.js";import{D as U}from"./Drawer-f97dcf36.js";import{B as z}from"./Box-baecd986.js";import{A as L,M as N}from"./Add-be456603.js";import{C as Y}from"./Close-d13f3f39.js";import{T as r,F as w,I as y,S}from"./TextField-f68277fc.js";import{D as H}from"./Delete-6cba4aef.js";import"./products-service-96e8b073.js";import"./clsx-0839fdbe.js";import"./memoTheme-1d107aae.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./ButtonBase-0ced804b.js";import"./TransitionGroupContext-313066da.js";import"./isFocusVisible-e8076040.js";import"./useTheme-8f0f7fed.js";import"./Modal-ffab5856.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-68f26a13.js";import"./utils-c960e5ca.js";import"./Paper-8b616e9b.js";import"./Slide-3ca36671.js";import"./debounce-517eeb3c.js";import"./Popover-9dc44c17.js";import"./isHostComponent-73d6e646.js";import"./Grow-883905ff.js";import"./listItemTextClasses-e447f593.js";import"./InputBase-6594b82d.js";import"./useId-364210a7.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-4e4f6f86.js";import"./useControlled-72a10751.js";const V=R(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");function De({data:s}){const[m,c]=u.useState(!1),[v,g]=u.useState(!1),x=E(),{toastStatus:j}=M(a=>a.app),[i,d]=u.useState({items:[]});u.useEffect(()=>{m&&s&&d({id:s.id,barcode:s.barcode,name:s.name,description:s.description,uom:s.uom,quantity:s.quantity,capital:s.capital,price:s.product.price,percent_selling_price:s.percent_selling_price,discount:s.discount,isVat:s.isVat,items:[...s.items.map(a=>({...a,price:a.product.price,capital:a.product.capital}))]})},[m]),console.log("datasssssss",i),u.useEffect(()=>{j.status==="success"&&c(!1)},[j.status]);const o=(a,l,t)=>{d(f=>{const h=[...f.items];return h[a]={...h[a],[l]:t},{...f,items:h}})};function n(a,l){d({...i,[a]:l})}const q=()=>{d(a=>({...a,items:[...a.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},D=a=>{d(l=>({...l,items:l.items.filter((t,f)=>f!==a)}))},I=async a=>{if(a.preventDefault(),window.confirm("You would like to continue?"))try{await C.dispatch(P({...i,item_id:B().format("MMDDYYYYHHmmss")})),await C.dispatch(T()),await x(k({open:!0,type:"success",message:"Created Successfully"})),await c(!1),await g(!1)}catch{g(!1)}};u.useEffect(()=>{m&&x(_({}))},[m,x]);const b=["Carton","Case","Bag","Tray","Can","Roll","Sheet","Plastic","Ream","Bottle","Sack","Kilo","1/4","1/2","3/4","Grams","Each","Dozen","Half Dozen","Pack","Small","Medium","Large"];return e.jsxs("div",{children:[e.jsx(p,{color:"info",variant:"contained",onClick:()=>c(!0),children:e.jsx(V,{})}),e.jsx(U,{anchor:"bottom",open:m,onClose:()=>c(!1),children:e.jsx(z,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:e.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[e.jsx("div",{className:"px-4 text-3xl font-bold",children:"UPDATE ITEM"}),e.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[e.jsxs(p,{variant:"contained",onClick:q,children:[e.jsx(L,{})," Add Item"]}),e.jsxs(p,{onClick:()=>c(!1),variant:"outlined",children:[e.jsx(Y,{})," Close"]})]}),e.jsxs("form",{onSubmit:I,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(r,{className:"w-full",required:!0,value:i.barcode,onChange:a=>n("barcode",a.target.value),label:"Barcode",variant:"outlined"}),e.jsx(r,{className:"w-full",value:i.name,onChange:a=>n("name",a.target.value),label:"Brand Name",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.description,onChange:a=>n("description",a.target.value),label:"Description",variant:"outlined"}),i.uom&&e.jsxs(w,{required:!0,fullWidth:!0,children:[e.jsx(y,{children:"Unit of Measurement"}),e.jsx(S,{label:"Unit of Measurement",value:i.uom,onChange:a=>n("uom",a.target.value),children:b.map(a=>e.jsx(N,{value:a,children:a},a))})]}),e.jsx(r,{className:"w-full",required:!0,value:i.quantity,onChange:a=>n("quantity",a.target.value.replace(/[^0-9.]/g,"")),label:"Selling Quantity",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.price,onChange:a=>n("price",a.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),i.capital&&e.jsx(r,{className:"w-full",required:!0,value:i.capital,onChange:a=>n("capital",a.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),e.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),i.items.map((a,l)=>e.jsx(e.Fragment,{children:l!=0&&e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[e.jsxs("div",{children:["Item ",l+1]}),a.barcode&&e.jsx(A,{setOpen:c,data:a}),!a.barcode&&e.jsxs(p,{disabled:v,variant:"outlined",onClick:()=>D(l),children:[e.jsx(H,{})," ","Remove"]})]}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(r,{type:"number",className:"w-full",required:!0,value:a.barcode,onChange:t=>o(l,"barcode",t.target.value),label:"Barcode",variant:"outlined"}),e.jsx(r,{className:"w-full",value:a.name,onChange:t=>o(l,"name",t.target.value),label:"Brand Name",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.description,onChange:t=>o(l,"description",t.target.value),label:"Description",variant:"outlined"}),e.jsxs(w,{fullWidth:!0,children:[e.jsx(y,{children:"Unit of Measurement"}),e.jsx(S,{label:"Unit of Measurement",value:a.uom,onChange:t=>o(l,"uom",t.target.value),children:b.map(t=>e.jsx(N,{value:t,children:t},t))})]}),e.jsx(r,{className:"w-full",required:!0,value:a.quantity,onChange:t=>o(l,"quantity",t.target.value.replace(/[^0-9.]/g,"")),label:"Selling Quantity",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.price,onChange:t=>o(l,"price",t.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.capital,onChange:t=>o(l,"capital",t.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]},l)}))]}),e.jsx(p,{disabled:v,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"UPDATE"})]})]})})})]})}export{De as default};
