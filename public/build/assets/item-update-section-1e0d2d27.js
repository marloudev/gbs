import{j as e,r as u,a as I,u as E,al as M,c as b,h as _,_ as B}from"./app-83ce7a51.js";import{u as P,g as k}from"./products-thunk-bdbd8845.js";import T from"./item-product-delete-section-ddcf143b.js";import{B as d}from"./Button-59fde5d5.js";import{c as A}from"./createSvgIcon-86a84dd3.js";import{D as U}from"./Drawer-b14f8ca7.js";import{B as z}from"./Box-2df3c5be.js";import{A as L,M as C}from"./Add-4b11dea6.js";import{C as R}from"./Close-3966a9fd.js";import{T as r,F as N,I as w,S as y}from"./TextField-b7aec146.js";import"./products-service-96e8b073.js";import"./Delete-3c431332.js";import"./clsx-0839fdbe.js";import"./memoTheme-00ea516b.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./ButtonBase-e1f83af8.js";import"./TransitionGroupContext-fb3e6e27.js";import"./isFocusVisible-e8076040.js";import"./useTheme-ba78349d.js";import"./Modal-76f8a6a0.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-911808af.js";import"./utils-3726fa69.js";import"./Paper-372ed738.js";import"./Slide-f2ac3716.js";import"./debounce-517eeb3c.js";import"./Popover-490ee6a9.js";import"./isHostComponent-73d6e646.js";import"./Grow-ccdca679.js";import"./listItemTextClasses-195e0c61.js";import"./InputBase-684800d7.js";import"./useId-34abe647.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-3b23461a.js";import"./useControlled-6066eed7.js";const Y=A(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");function Se({data:s}){const[m,c]=u.useState(!1),[S,h]=u.useState(!1),f=I(),{toastStatus:v}=E(a=>a.app),[i,p]=u.useState({items:[]});u.useEffect(()=>{m&&s&&p({id:s.id,barcode:s.barcode,name:s.name,description:s.description,uom:s.uom,quantity:s.quantity,capital:s.capital,price:s.product.price,percent_selling_price:s.percent_selling_price,discount:s.discount,isVat:s.isVat,items:[...s.items.map(a=>({...a,price:a.product.price,capital:a.product.capital}))]})},[m]),console.log("datasssssss",i),u.useEffect(()=>{v.status==="success"&&c(!1)},[v.status]);const n=(a,l,t)=>{p(j=>{const x=[...j.items];return x[a]={...x[a],[l]:t},{...j,items:x}})};function o(a,l){p({...i,[a]:l})}const q=()=>{p(a=>({...a,items:[...a.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},D=async a=>{if(a.preventDefault(),window.confirm("You would like to continue?"))try{await b.dispatch(P({...i,item_id:_().format("MMDDYYYYHHmmss")})),await b.dispatch(k()),await f(B({open:!0,type:"success",message:"Created Successfully"})),await c(!1),await h(!1)}catch{h(!1)}};u.useEffect(()=>{m&&f(M({}))},[m,f]);const g=["Carton","Case","Bag","Tray","Can","Roll","Sheet","Plastic","Ream","Bottle","Sack","Kilo","1/4","1/2","3/4","Grams","Each","Dozen","Half Dozen","Pack","Small","Medium","Large"];return e.jsxs("div",{children:[e.jsx(d,{color:"info",variant:"contained",onClick:()=>c(!0),children:e.jsx(Y,{})}),e.jsx(U,{anchor:"bottom",open:m,onClose:()=>c(!1),children:e.jsx(z,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:e.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[e.jsx("div",{className:"px-4 text-3xl font-bold",children:"UPDATE ITEM"}),e.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[e.jsxs(d,{variant:"contained",onClick:q,children:[e.jsx(L,{})," Add Item"]}),e.jsxs(d,{onClick:()=>c(!1),variant:"outlined",children:[e.jsx(R,{})," Close"]})]}),e.jsxs("form",{onSubmit:D,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(r,{className:"w-full",required:!0,value:i.barcode,onChange:a=>o("barcode",a.target.value),label:"Barcode",variant:"outlined"}),e.jsx(r,{className:"w-full",value:i.name,onChange:a=>o("name",a.target.value),label:"Brand Name",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.description,onChange:a=>o("description",a.target.value),label:"Description",variant:"outlined"}),i.uom&&e.jsxs(N,{required:!0,fullWidth:!0,children:[e.jsx(w,{children:"Unit of Measurement"}),e.jsx(y,{label:"Unit of Measurement",value:i.uom,onChange:a=>o("uom",a.target.value),children:g.map(a=>e.jsx(C,{value:a,children:a},a))})]}),e.jsx(r,{className:"w-full",required:!0,value:i.quantity,onChange:a=>o("quantity",a.target.value.replace(/[^0-9.]/g,"")),label:"Selling Quantity",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.price,onChange:a=>o("price",a.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),i.capital&&e.jsx(r,{className:"w-full",required:!0,value:i.capital,onChange:a=>o("capital",a.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),e.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),i.items.map((a,l)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[e.jsxs("div",{children:["Item ",l+1]}),e.jsx(T,{setOpen:c,data:a})]}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(r,{type:"number",className:"w-full",required:!0,value:a.barcode,onChange:t=>n(l,"barcode",t.target.value),label:"Barcode",variant:"outlined"}),e.jsx(r,{className:"w-full",value:a.name,onChange:t=>n(l,"name",t.target.value),label:"Brand Name",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.description,onChange:t=>n(l,"description",t.target.value),label:"Description",variant:"outlined"}),e.jsxs(N,{fullWidth:!0,children:[e.jsx(w,{children:"Unit of Measurement"}),e.jsx(y,{label:"Unit of Measurement",value:a.uom,onChange:t=>n(l,"uom",t.target.value),children:g.map(t=>e.jsx(C,{value:t,children:t},t))})]}),e.jsx(r,{className:"w-full",required:!0,value:a.quantity,onChange:t=>n(l,"quantity",t.target.value.replace(/[^0-9.]/g,"")),label:"Selling Quantity",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.price,onChange:t=>n(l,"price",t.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.capital,onChange:t=>n(l,"capital",t.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]},l)}))]}),e.jsx(d,{disabled:S,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"UPDATE"})]})]})})})]})}export{Se as default};
