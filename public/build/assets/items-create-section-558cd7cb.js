import{r as u,l as E,j as t,i as j,a as V,u as H,aj as U,c as M,m as z}from"./app-7e912eae.js";import{c as L,g as F}from"./products-thunk-fe034114.js";import{B as x}from"./Button-1a9a7b8c.js";import{D as G}from"./Drawer-c212c587.js";import{B as Y}from"./Box-98b3fc44.js";import{c as T}from"./createSvgIcon-6189aa7e.js";import{C as A}from"./Close-bfab1bee.js";import{T as c,F as $,I as S,S as B}from"./TextField-13e476a4.js";import{c as k}from"./clsx-0839fdbe.js";import{g as W,a as K,s as Q,r as J,m as X,c as Z}from"./memoTheme-693c50b1.js";import{b as D}from"./Popover-8ff3c5ae.js";import{B as ee}from"./ButtonBase-2783dda1.js";import{u as te,a as ae}from"./TransitionGroupContext-8499a62b.js";import{d as q,l as O,c as R}from"./listItemTextClasses-f65ab382.js";import"./products-service-96e8b073.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./useTheme-87f0ee9e.js";import"./Modal-5dae0bce.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-74d606f2.js";import"./utils-8f5f9ebe.js";import"./Paper-882e2551.js";import"./Slide-4372869b.js";import"./debounce-517eeb3c.js";import"./InputBase-c8d8f560.js";import"./isHostComponent-73d6e646.js";import"./useId-69cc26da.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-65107447.js";import"./useControlled-08147004.js";import"./Grow-cc28ed4b.js";import"./isFocusVisible-e8076040.js";function se(e){return W("MuiMenuItem",e)}const oe=K("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),b=oe,ie=(e,i)=>{const{ownerState:d}=e;return[i.root,d.dense&&i.dense,d.divider&&i.divider,!d.disableGutters&&i.gutters]},re=e=>{const{disabled:i,dense:d,divider:n,disableGutters:m,selected:v,classes:l}=e,r=Z({root:["root",d&&"dense",i&&"disabled",!m&&"gutters",n&&"divider",v&&"selected"]},se,l);return{...l,...r}},le=Q(ee,{shouldForwardProp:e=>J(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ie})(X(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${b.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${b.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${b.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${b.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${q.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${q.inset}`]:{marginLeft:52},[`& .${O.root}`]:{marginTop:0,marginBottom:0},[`& .${O.inset}`]:{paddingLeft:36},[`& .${R.root}`]:{minWidth:36},variants:[{props:({ownerState:i})=>!i.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:i})=>i.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:i})=>!i.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:i})=>i.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${R.root} svg`]:{fontSize:"1.25rem"}}}]}))),ne=u.forwardRef(function(i,d){const n=E({props:i,name:"MuiMenuItem"}),{autoFocus:m=!1,component:v="li",dense:l=!1,divider:f=!1,disableGutters:r=!1,focusVisibleClassName:y,role:I="menuitem",tabIndex:h,className:C,...a}=n,s=u.useContext(D),o=u.useMemo(()=>({dense:l||s.dense||!1,disableGutters:r}),[s.dense,l,r]),p=u.useRef(null);te(()=>{m&&p.current&&p.current.focus()},[m]);const g={...n,dense:o.dense,divider:f,disableGutters:r},w=re(n),_=ae(p,d);let N;return n.disabled||(N=h!==void 0?h:-1),t.jsx(D.Provider,{value:o,children:t.jsx(le,{ref:_,role:I,tabIndex:N,component:v,focusVisibleClassName:k(w.focusVisible,y),className:k(w.root,C),...a,ownerState:g,classes:w})})}),P=ne,ce=T(t.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),de=T(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function Ge(){const[e,i]=u.useState(!1),[d,n]=u.useState(!1),m=V(),{toastStatus:v}=H(a=>a.app),[l,f]=u.useState({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]});u.useEffect(()=>{v.status==="success"&&i(!1)},[v.status]);const r=(a,s,o)=>{f(p=>{const g=[...p.items];return g[a]={...g[a],[s]:o},{...p,items:g}})},y=()=>{f(a=>({...a,items:[...a.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},I=a=>{f(s=>({...s,items:s.items.filter((o,p)=>p!==a)}))},h=async a=>{if(a.preventDefault(),window.confirm("You want to continue.")){n(!0);try{await M.dispatch(L({...l,item_id:z().format("MMDDYYYYHHmmss")})),await M.dispatch(F()),f({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]}),i(!1),n(!1)}catch{n(!1)}}};u.useEffect(()=>{e&&m(U({}))},[e,m]);const C=["Carton","Case","Bag","Tray","Can","Roll","Sheet","Plastic","Bottle","Kilo","Grams","Each","Dozen","Pack"];return t.jsxs("div",{children:[t.jsx(x,{variant:"contained",onClick:()=>i(!0),children:"Create Item"}),t.jsx(G,{anchor:"bottom",open:e,onClose:()=>i(!1),children:t.jsx(Y,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:t.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[t.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[t.jsxs(x,{variant:"contained",onClick:y,children:[t.jsx(ce,{})," Add Item"]}),t.jsxs(x,{onClick:()=>i(!1),variant:"outlined",children:[t.jsx(A,{})," Close"]})]}),t.jsxs("form",{onSubmit:h,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[t.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),t.jsxs("div",{className:"flex gap-4 w-full",children:[t.jsx(c,{className:"w-full",required:!0,value:l.items[0].barcode,onChange:a=>r(0,"barcode",a.target.value),label:"Barcode",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:l.items[0].name,onChange:a=>r(0,"name",a.target.value),label:"Product Name",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:l.items[0].description,onChange:a=>r(0,"description",a.target.value),label:"Description",variant:"outlined"}),t.jsxs($,{required:!0,fullWidth:!0,children:[t.jsx(S,{children:"Unit of Measurement"}),t.jsx(B,{label:"Unit of Measurement",value:l.items[0].uom,onChange:a=>r(0,"uom",a.target.value),children:C.map(a=>t.jsx(P,{value:a,children:a},a))})]}),t.jsx(c,{className:"w-full",required:!0,value:l.items[0].capital,onChange:a=>r(0,"capital",a.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),t.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),l.items.map((a,s)=>t.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[t.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[t.jsxs("div",{children:["Item ",s+1]}),s!=0&&t.jsxs(x,{variant:"outlined",onClick:()=>I(s),children:[t.jsx(de,{})," Remove"]})]}),t.jsxs("div",{className:"flex gap-4 w-full",children:[t.jsx(c,{disabled:s==0,className:"w-full",required:!0,value:a.barcode,onChange:o=>r(s,"barcode",o.target.value),label:"Barcode",variant:"outlined"}),t.jsx(c,{disabled:s==0,className:"w-full",required:!0,value:a.name,onChange:o=>r(s,"name",o.target.value),label:"Product Name",variant:"outlined"}),t.jsx(c,{disabled:s==0,className:"w-full",required:!0,value:a.description,onChange:o=>r(s,"description",o.target.value),label:"Description",variant:"outlined"}),t.jsxs($,{fullWidth:!0,children:[t.jsx(S,{children:"Unit of Measurement"}),t.jsx(B,{disabled:s==0,label:"Unit of Measurement",value:a.uom,onChange:o=>r(s,"uom",o.target.value),children:C.map(o=>t.jsx(P,{value:o,children:o},o))})]}),t.jsx(c,{className:"w-full",required:!0,value:a.quantity,onChange:o=>r(s,"quantity",o.target.value.replace(/[^0-9.]/g,"")),label:"Quantity",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:a.price,onChange:o=>r(s,"price",o.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),t.jsx(c,{className:"w-full",required:!0,value:a.discount,onChange:o=>r(s,"discount",o.target.value.replace(/[^0-9.]/g,"")),label:"Discount",variant:"outlined"})]})]},s))]}),t.jsx(x,{disabled:d,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"Submit"})]})]})})})]})}export{Ge as default};
