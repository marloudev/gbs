import{r as u,l as V,j as a,i as C,a as E,u as H,aj as U,c as B,m as L}from"./app-db503ed8.js";import{c as z,g as F}from"./products-thunk-f0c2f56a.js";import{B as b}from"./Button-3633b1b9.js";import{D as Y}from"./Drawer-09e7f05b.js";import{B as A}from"./Box-944c01e1.js";import{c as O}from"./createSvgIcon-b551dfbf.js";import{C as G}from"./Close-6f10d612.js";import{T as n,F as M,I as $,S}from"./TextField-4ab46597.js";import{c as k}from"./clsx-0839fdbe.js";import{g as W,a as Q,s as J,r as K,m as X,c as Z}from"./memoTheme-ab4b9a8d.js";import{b as q}from"./Popover-e3baf42e.js";import{B as ee}from"./ButtonBase-675d3a31.js";import{u as ae,a as te}from"./TransitionGroupContext-3f72ed05.js";import{d as D,l as P,c as _}from"./listItemTextClasses-fa9a1364.js";import"./products-service-96e8b073.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./useTheme-b817827b.js";import"./Modal-3c462a25.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-def02969.js";import"./utils-4abefbfe.js";import"./Paper-aeb56e4a.js";import"./Slide-7a0b89ab.js";import"./debounce-517eeb3c.js";import"./InputBase-dbde21a5.js";import"./isHostComponent-73d6e646.js";import"./useId-6d49a73a.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-5e028ca4.js";import"./useControlled-f9b8f1d4.js";import"./Grow-51dd251f.js";import"./isFocusVisible-e8076040.js";function se(e){return W("MuiMenuItem",e)}const ie=Q("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),h=ie,re=(e,i)=>{const{ownerState:d}=e;return[i.root,d.dense&&i.dense,d.divider&&i.divider,!d.disableGutters&&i.gutters]},le=e=>{const{disabled:i,dense:d,divider:c,disableGutters:p,selected:g,classes:o}=e,l=Z({root:["root",d&&"dense",i&&"disabled",!p&&"gutters",c&&"divider",g&&"selected"]},se,o);return{...o,...l}},oe=J(ee,{shouldForwardProp:e=>K(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:re})(X(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:C(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${h.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:C(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${h.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:C(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:C(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${h.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${h.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${D.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${D.inset}`]:{marginLeft:52},[`& .${P.root}`]:{marginTop:0,marginBottom:0},[`& .${P.inset}`]:{paddingLeft:36},[`& .${_.root}`]:{minWidth:36},variants:[{props:({ownerState:i})=>!i.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:i})=>i.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:i})=>!i.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:i})=>i.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${_.root} svg`]:{fontSize:"1.25rem"}}}]}))),ne=u.forwardRef(function(i,d){const c=V({props:i,name:"MuiMenuItem"}),{autoFocus:p=!1,component:g="li",dense:o=!1,divider:m=!1,disableGutters:l=!1,focusVisibleClassName:y,role:I="menuitem",tabIndex:j,className:t,...s}=c,r=u.useContext(q),f=u.useMemo(()=>({dense:o||r.dense||!1,disableGutters:l}),[r.dense,o,l]),v=u.useRef(null);ae(()=>{p&&v.current&&v.current.focus()},[p]);const R={...c,dense:f.dense,divider:m,disableGutters:l},w=le(c),T=te(v,d);let N;return c.disabled||(N=j!==void 0?j:-1),a.jsx(q.Provider,{value:f,children:a.jsx(oe,{ref:T,role:I,tabIndex:N,component:g,focusVisibleClassName:k(w.focusVisible,y),className:k(w.root,t),...s,ownerState:R,classes:w})})}),x=ne,ce=O(a.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),de=O(a.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function Ye(){const[e,i]=u.useState(!1),[d,c]=u.useState(!1),p=E(),{toastStatus:g}=H(t=>t.app),[o,m]=u.useState({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]});u.useEffect(()=>{g.status==="success"&&i(!1)},[g.status]);const l=(t,s,r)=>{m(f=>{const v=[...f.items];return v[t]={...v[t],[s]:r},{...f,items:v}})},y=()=>{m(t=>({...t,items:[...t.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},I=t=>{m(s=>({...s,items:s.items.filter((r,f)=>f!==t)}))},j=async t=>{if(t.preventDefault(),window.confirm("You want to continue.")){c(!0);try{await B.dispatch(z({...o,item_id:L().format("MMDDYYYYHHmmss")})),await B.dispatch(F()),m({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]}),i(!1),c(!1)}catch{c(!1)}}};return u.useEffect(()=>{e&&p(U({}))},[e,p]),a.jsxs("div",{children:[a.jsx(b,{variant:"contained",onClick:()=>i(!0),children:"Create Item"}),a.jsx(Y,{anchor:"bottom",open:e,onClose:()=>i(!1),children:a.jsx(A,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:a.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[a.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[a.jsxs(b,{variant:"contained",onClick:y,children:[a.jsx(ce,{})," Add Item"]}),a.jsxs(b,{onClick:()=>i(!1),variant:"contained",children:[a.jsx(G,{})," Close"]})]}),a.jsxs("form",{onSubmit:j,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[a.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[a.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),a.jsxs("div",{className:"flex gap-4 w-full",children:[a.jsx(n,{className:"w-full",required:!0,value:o.items[0].barcode,onChange:t=>l(0,"barcode",t.target.value),label:"Barcode",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].name,onChange:t=>l(0,"name",t.target.value),label:"Product Name",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].description,onChange:t=>l(0,"description",t.target.value),label:"Description",variant:"outlined"}),a.jsxs(M,{required:!0,fullWidth:!0,children:[a.jsx($,{children:"Unit of Measurement"}),a.jsxs(S,{label:"Unit of Measurement",value:o.items[0].uom,onChange:t=>l(0,"uom",t.target.value),children:[a.jsx(x,{value:"Box",children:"Box"}),a.jsx(x,{value:"Plastic",children:"Plastic"}),a.jsx(x,{value:"Bag",children:"Bag"})]})]}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].capital,onChange:t=>l(0,"capital",t.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),a.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),o.items.map((t,s)=>a.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[a.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[a.jsxs("div",{children:["Item ",s+1]}),s!=0&&a.jsxs(b,{variant:"outlined",onClick:()=>I(s),children:[a.jsx(de,{})," Remove"]})]}),a.jsxs("div",{className:"flex gap-4 w-full",children:[a.jsx(n,{disabled:s==0,className:"w-full",required:!0,value:t.barcode,onChange:r=>l(s,"barcode",r.target.value),label:"Barcode",variant:"outlined"}),a.jsx(n,{disabled:s==0,className:"w-full",required:!0,value:t.name,onChange:r=>l(s,"name",r.target.value),label:"Product Name",variant:"outlined"}),a.jsx(n,{disabled:s==0,className:"w-full",required:!0,value:t.description,onChange:r=>l(s,"description",r.target.value),label:"Description",variant:"outlined"}),a.jsxs(M,{fullWidth:!0,children:[a.jsx($,{children:"Unit of Measurement"}),a.jsxs(S,{disabled:s==0,label:"Unit of Measurement",value:t.uom,onChange:r=>l(s,"uom",r.target.value),children:[a.jsx(x,{value:"Box",children:"Box"}),a.jsx(x,{value:"Plastic",children:"Plastic"}),a.jsx(x,{value:"Bag",children:"Bag"})]})]}),a.jsx(n,{className:"w-full",required:!0,value:t.quantity,onChange:r=>l(s,"quantity",r.target.value.replace(/[^0-9.]/g,"")),label:"Quantity",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.price,onChange:r=>l(s,"price",r.target.value.replace(/[^0-9.]/g,"")),label:"Price",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.percent_selling_price,onChange:r=>l(s,"percent_selling_price",r.target.value.replace(/[^0-9.]/g,"")),label:"Percent Selling Price",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.discount,onChange:r=>l(s,"discount",r.target.value.replace(/[^0-9.]/g,"")),label:"Discount",variant:"outlined"})]})]},s)),a.jsx(b,{disabled:d,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"Submit"})]})]})})})]})}export{Ye as default};
