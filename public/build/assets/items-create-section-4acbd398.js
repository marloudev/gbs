import{r as o,a as D,u as B,al as _,j as e,c as g,h as M,_ as j}from"./app-8857b6cd.js";import{c as k,g as E}from"./products-thunk-bfa789d9.js";import{B as c}from"./Button-ec7daf15.js";import{D as P}from"./Drawer-f97dcf36.js";import{B as R}from"./Box-baecd986.js";import{A as T,M as b}from"./Add-be456603.js";import{C as Y}from"./Close-d13f3f39.js";import{T as r,F as C,I as N,S as w}from"./TextField-f68277fc.js";import{D as A}from"./Delete-6cba4aef.js";import"./products-service-96e8b073.js";import"./clsx-0839fdbe.js";import"./memoTheme-1d107aae.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./ButtonBase-0ced804b.js";import"./TransitionGroupContext-313066da.js";import"./isFocusVisible-e8076040.js";import"./useTheme-8f0f7fed.js";import"./Modal-ffab5856.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-68f26a13.js";import"./utils-c960e5ca.js";import"./Paper-8b616e9b.js";import"./Slide-3ca36671.js";import"./debounce-517eeb3c.js";import"./Popover-9dc44c17.js";import"./isHostComponent-73d6e646.js";import"./Grow-883905ff.js";import"./listItemTextClasses-e447f593.js";import"./createSvgIcon-467da01d.js";import"./InputBase-6594b82d.js";import"./useId-364210a7.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-4e4f6f86.js";import"./useControlled-72a10751.js";function Ce(){const[p,n]=o.useState(!1),[y,f]=o.useState(!1),u=D(),{toastStatus:h}=B(a=>a.app),[i,m]=o.useState({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]});o.useEffect(()=>{h.status==="success"&&n(!1)},[h.status]);const l=(a,s,t)=>{m(d=>{const x=[...d.items];return x[a]={...x[a],[s]:t},{...d,items:x}})},q=()=>{m(a=>({...a,items:[...a.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},S=a=>{m(s=>({...s,items:s.items.filter((t,d)=>d!==a)}))},I=async a=>{if(a.preventDefault(),window.confirm("You would like to continue?"))try{(await g.dispatch(k({...i,item_id:M().format("MMDDYYYYHHmmss")}))).status=="exist"?(u(j({open:!0,type:"error",message:"Parent Item is already exist!"})),f(!1)):(await g.dispatch(E()),m({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]}),u(j({open:!0,type:"success",message:"Created Successfully"})),n(!1),f(!1))}catch{f(!1)}};o.useEffect(()=>{p&&u(_({}))},[p,u]);const v=["Carton","Case","Bag","Tray","Can","Roll","Sheet","Plastic","Ream","Bottle","Sack","Kilo","1/4","1/2","3/4","Grams","Each","Dozen","Half Dozen","Pack","Small","Medium","Large"];return e.jsxs("div",{children:[e.jsx(c,{variant:"contained",onClick:()=>n(!0),children:"Create Item"}),e.jsx(P,{anchor:"bottom",open:p,onClose:()=>n(!1),children:e.jsx(R,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:e.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[e.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[e.jsxs(c,{variant:"contained",onClick:q,children:[e.jsx(T,{})," Add Item"]}),e.jsxs(c,{onClick:()=>n(!1),variant:"outlined",children:[e.jsx(Y,{})," Close"]})]}),e.jsxs("form",{onSubmit:I,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(r,{className:"w-full",required:!0,value:i.items[0].barcode,onChange:a=>l(0,"barcode",a.target.value),label:"Barcode",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.items[0].name,onChange:a=>l(0,"name",a.target.value),label:"Brand Name",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.items[0].description,onChange:a=>l(0,"description",a.target.value),label:"Description",variant:"outlined"}),e.jsxs(C,{required:!0,fullWidth:!0,children:[e.jsx(N,{children:"Unit of Measurement"}),e.jsx(w,{label:"Unit of Measurement",value:i.items[0].uom,onChange:a=>l(0,"uom",a.target.value),children:v.map(a=>e.jsx(b,{value:a,children:a},a))})]}),e.jsx(r,{className:"w-full",required:!0,value:i.items[0].quantity,onChange:a=>l(0,"quantity",a.target.value.replace(/[^0-9.]/g,"")),label:"Selling Quantity",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.items[0].price,onChange:a=>l(0,"price",a.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:i.items[0].capital,onChange:a=>l(0,"capital",a.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),e.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),i.items.map((a,s)=>e.jsx(e.Fragment,{children:s!=0&&e.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[e.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[e.jsxs("div",{children:["Item ",s+1]}),s!=0&&e.jsxs(c,{variant:"outlined",onClick:()=>S(s),children:[e.jsx(A,{})," Remove"]})]}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(r,{type:"number",className:"w-full",required:!0,value:a.barcode,onChange:t=>l(s,"barcode",t.target.value),label:"Barcode",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.name,onChange:t=>l(s,"name",t.target.value),label:"Brand Name",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.description,onChange:t=>l(s,"description",t.target.value),label:"Description",variant:"outlined"}),e.jsxs(C,{fullWidth:!0,children:[e.jsx(N,{children:"Unit of Measurement"}),e.jsx(w,{label:"Unit of Measurement",value:a.uom,onChange:t=>l(s,"uom",t.target.value),children:v.map(t=>e.jsx(b,{value:t,children:t},t))})]}),e.jsx(r,{className:"w-full",required:!0,value:a.quantity,onChange:t=>l(s,"quantity",t.target.value.replace(/[^0-9.]/g,"")),label:"Selling Quantity",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.price,onChange:t=>l(s,"price",t.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),e.jsx(r,{className:"w-full",required:!0,value:a.capital,onChange:t=>l(s,"capital",t.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]},s)}))]}),e.jsx(c,{disabled:y,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"Submit"})]})]})})})]})}export{Ce as default};
