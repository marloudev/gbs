import{r as u,l as E,j as a,i as j,a as V,u as H,aj as U,c as M,m as z}from"./app-d0404b07.js";import{c as L,g as F}from"./products-thunk-e9067694.js";import{B as b}from"./Button-1cc56a1d.js";import{D as G}from"./Drawer-f062d2ea.js";import{B as Y}from"./Box-d0cf1bda.js";import{c as R}from"./createSvgIcon-a50728cf.js";import{C as A}from"./Close-18e381e3.js";import{T as n,F as $,I as S,S as B}from"./TextField-26901098.js";import{c as k}from"./clsx-0839fdbe.js";import{g as W,a as K,s as Q,r as J,m as X,c as Z}from"./memoTheme-6ce940c0.js";import{b as q}from"./Popover-6a2fa696.js";import{B as ee}from"./ButtonBase-d092cf75.js";import{u as ae,a as te}from"./TransitionGroupContext-24c2a607.js";import{d as D,l as _,c as O}from"./listItemTextClasses-3941de8d.js";import"./products-service-96e8b073.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./useTheme-3611b1e4.js";import"./Modal-fa07d1f2.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-e92c8238.js";import"./utils-f856cbd9.js";import"./Paper-ebab3700.js";import"./Slide-a5e40aee.js";import"./debounce-517eeb3c.js";import"./InputBase-3b8f1338.js";import"./isHostComponent-73d6e646.js";import"./useId-cac2d0e5.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-42a50b41.js";import"./useControlled-d6112a16.js";import"./Grow-5047dc37.js";import"./isFocusVisible-e8076040.js";function se(e){return W("MuiMenuItem",e)}const re=K("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),x=re,ie=(e,i)=>{const{ownerState:d}=e;return[i.root,d.dense&&i.dense,d.divider&&i.divider,!d.disableGutters&&i.gutters]},oe=e=>{const{disabled:i,dense:d,divider:c,disableGutters:m,selected:v,classes:l}=e,o=Z({root:["root",d&&"dense",i&&"disabled",!m&&"gutters",c&&"divider",v&&"selected"]},se,l);return{...l,...o}},le=Q(ee,{shouldForwardProp:e=>J(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ie})(X(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${x.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${x.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:j(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:j(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${x.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${x.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${D.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${D.inset}`]:{marginLeft:52},[`& .${_.root}`]:{marginTop:0,marginBottom:0},[`& .${_.inset}`]:{paddingLeft:36},[`& .${O.root}`]:{minWidth:36},variants:[{props:({ownerState:i})=>!i.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:i})=>i.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:i})=>!i.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:i})=>i.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${O.root} svg`]:{fontSize:"1.25rem"}}}]}))),ne=u.forwardRef(function(i,d){const c=E({props:i,name:"MuiMenuItem"}),{autoFocus:m=!1,component:v="li",dense:l=!1,divider:f=!1,disableGutters:o=!1,focusVisibleClassName:y,role:I="menuitem",tabIndex:h,className:C,...t}=c,r=u.useContext(q),s=u.useMemo(()=>({dense:l||r.dense||!1,disableGutters:o}),[r.dense,l,o]),p=u.useRef(null);ae(()=>{m&&p.current&&p.current.focus()},[m]);const g={...c,dense:s.dense,divider:f,disableGutters:o},w=oe(c),T=te(p,d);let N;return c.disabled||(N=h!==void 0?h:-1),a.jsx(q.Provider,{value:s,children:a.jsx(le,{ref:T,role:I,tabIndex:N,component:v,focusVisibleClassName:k(w.focusVisible,y),className:k(w.root,C),...t,ownerState:g,classes:w})})}),P=ne,ce=R(a.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),de=R(a.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function Ge(){const[e,i]=u.useState(!1),[d,c]=u.useState(!1),m=V(),{toastStatus:v}=H(t=>t.app),[l,f]=u.useState({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]});u.useEffect(()=>{v.status==="success"&&i(!1)},[v.status]);const o=(t,r,s)=>{f(p=>{const g=[...p.items];return g[t]={...g[t],[r]:s},{...p,items:g}})},y=()=>{f(t=>({...t,items:[...t.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},I=t=>{f(r=>({...r,items:r.items.filter((s,p)=>p!==t)}))},h=async t=>{if(t.preventDefault(),window.confirm("You want to continue.")){c(!0);try{await M.dispatch(L({...l,item_id:z().format("MMDDYYYYHHmmss")})),await M.dispatch(F()),f({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]}),i(!1),c(!1)}catch{c(!1)}}};u.useEffect(()=>{e&&m(U({}))},[e,m]);const C=["Carton","Case","Bag","Tray","Can","Roll","Sheet","Plastic","Bottle","Kilo","Grams","Each","Dozen","Pack"];return a.jsxs("div",{children:[a.jsx(b,{variant:"contained",onClick:()=>i(!0),children:"Create Item"}),a.jsx(G,{anchor:"bottom",open:e,onClose:()=>i(!1),children:a.jsx(Y,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:a.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[a.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[a.jsxs(b,{variant:"contained",onClick:y,children:[a.jsx(ce,{})," Add Item"]}),a.jsxs(b,{onClick:()=>i(!1),variant:"contained",children:[a.jsx(A,{})," Close"]})]}),a.jsxs("form",{onSubmit:h,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[a.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[a.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),a.jsxs("div",{className:"flex gap-4 w-full",children:[a.jsx(n,{className:"w-full",required:!0,value:l.items[0].barcode,onChange:t=>o(0,"barcode",t.target.value),label:"Barcode",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:l.items[0].name,onChange:t=>o(0,"name",t.target.value),label:"Product Name",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:l.items[0].description,onChange:t=>o(0,"description",t.target.value),label:"Description",variant:"outlined"}),a.jsxs($,{required:!0,fullWidth:!0,children:[a.jsx(S,{children:"Unit of Measurement"}),a.jsx(B,{label:"Unit of Measurement",value:l.items[0].uom,onChange:t=>o(0,"uom",t.target.value),children:C.map(t=>a.jsx(P,{value:t,children:t},t))})]}),a.jsx(n,{className:"w-full",required:!0,value:l.items[0].capital,onChange:t=>o(0,"capital",t.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),a.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),l.items.map((t,r)=>a.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[a.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[a.jsxs("div",{children:["Item ",r+1]}),r!=0&&a.jsxs(b,{variant:"outlined",onClick:()=>I(r),children:[a.jsx(de,{})," Remove"]})]}),a.jsxs("div",{className:"flex gap-4 w-full",children:[a.jsx(n,{disabled:r==0,className:"w-full",required:!0,value:t.barcode,onChange:s=>o(r,"barcode",s.target.value),label:"Barcode",variant:"outlined"}),a.jsx(n,{disabled:r==0,className:"w-full",required:!0,value:t.name,onChange:s=>o(r,"name",s.target.value),label:"Product Name",variant:"outlined"}),a.jsx(n,{disabled:r==0,className:"w-full",required:!0,value:t.description,onChange:s=>o(r,"description",s.target.value),label:"Description",variant:"outlined"}),a.jsxs($,{fullWidth:!0,children:[a.jsx(S,{children:"Unit of Measurement"}),a.jsx(B,{label:"Unit of Measurement",value:t.uom,onChange:s=>o(r,"uom",s.target.value),children:C.map(s=>a.jsx(P,{value:s,children:s},s))})]}),a.jsx(n,{className:"w-full",required:!0,value:t.quantity,onChange:s=>o(r,"quantity",s.target.value.replace(/[^0-9.]/g,"")),label:"Quantity",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.price,onChange:s=>o(r,"price",s.target.value.replace(/[^0-9.]/g,"")),label:"Price",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.percent_selling_price,onChange:s=>o(r,"percent_selling_price",s.target.value.replace(/[^0-9.]/g,"")),label:"Percent Selling Price",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.discount,onChange:s=>o(r,"discount",s.target.value.replace(/[^0-9.]/g,"")),label:"Discount",variant:"outlined"})]})]},r)),a.jsx(b,{disabled:d,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"Submit"})]})]})})})]})}export{Ge as default};
