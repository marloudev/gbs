import{r as p,l as V,j as a,i as y,a as H,u as z,aj as L,c as M,m as U,_ as $}from"./app-05ddd05a.js";import{c as F,g as G}from"./products-thunk-90c2b454.js";import{B as x}from"./Button-886dd74e.js";import{D as Y}from"./Drawer-8a7dcc4a.js";import{B as A}from"./Box-4ecf80a6.js";import{c as T}from"./createSvgIcon-2cf123f3.js";import{C as W}from"./Close-b5ecfe47.js";import{T as n,F as S,I as B,S as q}from"./TextField-9a84bcc6.js";import{c as k}from"./clsx-0839fdbe.js";import{g as Q,a as K,s as J,r as X,m as Z,c as ee}from"./memoTheme-da397490.js";import{b as D}from"./Popover-ba701528.js";import{B as ae}from"./ButtonBase-ec27260f.js";import{u as te,a as se}from"./TransitionGroupContext-91378426.js";import{d as O,l as R,c as _}from"./listItemTextClasses-c27a774f.js";import"./products-service-96e8b073.js";import"./createSimplePaletteValueFilter-697dba8e.js";import"./useTheme-04e79c76.js";import"./Modal-ffb00456.js";import"./ownerWindow-03d1c82d.js";import"./ownerDocument-613eb639.js";import"./resolveComponentProps-3112ecbb.js";import"./useSlot-9a4a0be9.js";import"./utils-2674f20f.js";import"./getReactElementRef-c11325f7.js";import"./Paper-5fa38c0b.js";import"./Slide-2700d80f.js";import"./debounce-517eeb3c.js";import"./InputBase-4c8fcebb.js";import"./isHostComponent-73d6e646.js";import"./useId-80eb637d.js";import"./react-is.production.min-a192e302.js";import"./useSlotProps-5727c2f2.js";import"./useControlled-0201a76a.js";import"./Grow-a8bfdecb.js";import"./isFocusVisible-e8076040.js";function re(e){return Q("MuiMenuItem",e)}const ie=K("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),b=ie,le=(e,r)=>{const{ownerState:d}=e;return[r.root,d.dense&&r.dense,d.divider&&r.divider,!d.disableGutters&&r.gutters]},oe=e=>{const{disabled:r,dense:d,divider:c,disableGutters:u,selected:v,classes:o}=e,l=ee({root:["root",d&&"dense",r&&"disabled",!u&&"gutters",c&&"divider",v&&"selected"]},re,o);return{...o,...l}},ne=J(ae,{shouldForwardProp:e=>X(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:le})(Z(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:y(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${b.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:y(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${b.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:y(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:y(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${b.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${b.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${O.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${O.inset}`]:{marginLeft:52},[`& .${R.root}`]:{marginTop:0,marginBottom:0},[`& .${R.inset}`]:{paddingLeft:36},[`& .${_.root}`]:{minWidth:36},variants:[{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:r})=>r.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:r})=>!r.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:r})=>r.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${_.root} svg`]:{fontSize:"1.25rem"}}}]}))),ce=p.forwardRef(function(r,d){const c=V({props:r,name:"MuiMenuItem"}),{autoFocus:u=!1,component:v="li",dense:o=!1,divider:f=!1,disableGutters:l=!1,focusVisibleClassName:j,role:I="menuitem",tabIndex:h,className:C,...t}=c,i=p.useContext(D),s=p.useMemo(()=>({dense:o||i.dense||!1,disableGutters:l}),[i.dense,o,l]),m=p.useRef(null);te(()=>{u&&m.current&&m.current.focus()},[u]);const g={...c,dense:s.dense,divider:f,disableGutters:l},w=oe(c),E=se(m,d);let N;return c.disabled||(N=h!==void 0?h:-1),a.jsx(D.Provider,{value:s,children:a.jsx(ne,{ref:E,role:I,tabIndex:N,component:v,focusVisibleClassName:k(w.focusVisible,j),className:k(w.root,C),...t,ownerState:g,classes:w})})}),P=ce,de=T(a.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),ue=T(a.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function Ae(){const[e,r]=p.useState(!1),[d,c]=p.useState(!1),u=H(),{toastStatus:v}=z(t=>t.app),[o,f]=p.useState({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]});p.useEffect(()=>{v.status==="success"&&r(!1)},[v.status]);const l=(t,i,s)=>{f(m=>{const g=[...m.items];return g[t]={...g[t],[i]:s},{...m,items:g}})},j=()=>{f(t=>({...t,items:[...t.items,{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,percent_selling_price:0,discount:0,isVat:0}]}))},I=t=>{f(i=>({...i,items:i.items.filter((s,m)=>m!==t)}))},h=async t=>{if(t.preventDefault(),window.confirm("You would like to continue?"))try{(await M.dispatch(F({...o,item_id:U().format("MMDDYYYYHHmmss")}))).status=="exist"?(u($({open:!0,type:"error",message:"Parent Item is already exist!"})),c(!1)):(await M.dispatch(G()),f({items:[{barcode:"",name:"",description:"",uom:"Box",quantity:0,capital:0,price:0,percent_selling_price:0,discount:0,isVat:0}]}),u($({open:!0,type:"success",message:"Created Successfully"})),r(!1),c(!1))}catch{c(!1)}};p.useEffect(()=>{e&&u(L({}))},[e,u]);const C=["Carton","Case","Bag","Tray","Can","Roll","Sheet","Plastic","Bottle","Kilo","Grams","Each","Dozen","Half Dozen","Pack","Small","Medium","Large"];return a.jsxs("div",{children:[a.jsx(x,{variant:"contained",onClick:()=>r(!0),children:"Create Item"}),a.jsx(Y,{anchor:"bottom",open:e,onClose:()=>r(!1),children:a.jsx(A,{className:"h-[93vh] flex items-start justify-center",role:"presentation",children:a.jsxs("div",{className:"flex flex-col gap-4 max-w-7xl",children:[a.jsxs("div",{className:"w-full flex items-center justify-between p-4",children:[a.jsxs(x,{variant:"contained",onClick:j,children:[a.jsx(de,{})," Add Item"]}),a.jsxs(x,{onClick:()=>r(!1),variant:"outlined",children:[a.jsx(W,{})," Close"]})]}),a.jsxs("form",{onSubmit:h,className:"flex flex-col w-full min-h-[80vh]  p-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[a.jsx("div",{className:"text-xl font-semibold",children:"PARENT ITEM"}),a.jsxs("div",{className:"flex gap-4 w-full",children:[a.jsx(n,{className:"w-full",required:!0,value:o.items[0].barcode,onChange:t=>l(0,"barcode",t.target.value),label:"Barcode",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].name,onChange:t=>l(0,"name",t.target.value),label:"Brand Name",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].description,onChange:t=>l(0,"description",t.target.value),label:"Description",variant:"outlined"}),a.jsxs(S,{required:!0,fullWidth:!0,children:[a.jsx(B,{children:"Unit of Measurement"}),a.jsx(q,{label:"Unit of Measurement",value:o.items[0].uom,onChange:t=>l(0,"uom",t.target.value),children:C.map(t=>a.jsx(P,{value:t,children:t},t))})]}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].quantity,onChange:t=>l(0,"quantity",t.target.value.replace(/[^0-9.]/g,"")),label:"Quantity",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].price,onChange:t=>l(0,"price",t.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:o.items[0].capital,onChange:t=>l(0,"capital",t.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]}),a.jsx("div",{className:"text-xl font-semibold",children:"CHILDREN ITEM"}),o.items.map((t,i)=>a.jsx(a.Fragment,{children:i!=0&&a.jsxs("div",{className:"flex flex-col gap-4 mb-4",children:[a.jsxs("div",{className:"text-xl font-semibold flex items-center justify-between",children:[a.jsxs("div",{children:["Item ",i+1]}),i!=0&&a.jsxs(x,{variant:"outlined",onClick:()=>I(i),children:[a.jsx(ue,{})," Remove"]})]}),a.jsxs("div",{className:"flex gap-4 w-full",children:[a.jsx(n,{type:"number",className:"w-full",required:!0,value:t.barcode,onChange:s=>l(i,"barcode",s.target.value),label:"Barcode",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.name,onChange:s=>l(i,"name",s.target.value),label:"Brand Name",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.description,onChange:s=>l(i,"description",s.target.value),label:"Description",variant:"outlined"}),a.jsxs(S,{fullWidth:!0,children:[a.jsx(B,{children:"Unit of Measurement"}),a.jsx(q,{label:"Unit of Measurement",value:t.uom,onChange:s=>l(i,"uom",s.target.value),children:C.map(s=>a.jsx(P,{value:s,children:s},s))})]}),a.jsx(n,{className:"w-full",required:!0,value:t.quantity,onChange:s=>l(i,"quantity",s.target.value.replace(/[^0-9.]/g,"")),label:"Quantity",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.price,onChange:s=>l(i,"price",s.target.value.replace(/[^0-9.]/g,"")),label:"Selling Price",variant:"outlined"}),a.jsx(n,{className:"w-full",required:!0,value:t.capital,onChange:s=>l(i,"capital",s.target.value.replace(/[^0-9.]/g,"")),label:"Capital",variant:"outlined"})]})]},i)}))]}),a.jsx(x,{disabled:d,size:"large",type:"submit",variant:"contained",className:"w-full mt-4",children:"Submit"})]})]})})})]})}export{Ae as default};
