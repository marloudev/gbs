import{a as d}from"./sales-service-19b3eac2.js";import{aq as e,m as _,o}from"./app-05ddd05a.js";async function m(t){return(await axios.get("/api/get_cart/"+t)).data.data}async function l(t){return(await axios.post("/api/carts",t)).data}async function g(t){return(await axios.put(`/api/carts/${t.id}`,t)).data.data}async function p(t){return(await axios.delete(`/api/carts/${t}`)).data.data}function y(){return async function(t,a){const n=localStorage.getItem("receipt_id"),s=await m(n);t(e.actions.setCart(s))}}function S(t){return async function(a,n){const s=await p(t);a(e.actions.setCart(s))}}function I(t){return async function(a,n){const s=await g(t);a(e.actions.setCart(s))}}function k(t){return async function(a,n){var s,r,i;if((await t).status=="success"){localStorage.getItem("receipt_id")||localStorage.setItem("receipt_id",_().format("MMDDYYYYHHmmss"));const c=Math.floor(1e9+Math.random()*9e9),u=await l({receipt_id:localStorage.getItem("receipt_id"),barcode:(await t).data.barcode,randomId:c,quantity:(await t).data.quantity,price:(await t).data.price,total:(await t).data.price,capital:(await t).data.capital,supply_barcode:((i=(r=(s=(await t).data)==null?void 0:s.item_product)==null?void 0:r.item)==null?void 0:i.barcode)??0});a(e.actions.setCart(u.data)),a(e.actions.setSearch(""))}else a(e.actions.setSearch(""))}}function C(){return async function(t,a){t(e.actions.setLoading(!0)),t(o.actions.setToastStatus({status:"loading",message:"Loading..."}));const n=a().cashier.payment,s=a().cashier.cart,r={payment:n,cart:s};try{await d(r),await t(e.actions.setIsPrint(!0)),setTimeout(()=>{t(e.actions.setIsPrint(!1))},1e3),await t(e.actions.setLoading(!1)),await t(e.actions.resetPayment()),await t(o.actions.setToastStatus({status:"success",message:"Created Success!"})),localStorage.clear()}catch(i){t(e.actions.setLoading(!1)),t(o.actions.setToastStatus({status:"error",message:i.response.data.message}))}}}export{k as a,C as c,S as d,I as e,y as g};
